<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Luca Gerencial</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìä</text></svg>">
</head>
<body>
    <div class="top-bar">
        <div class="top-bar-left">
            <h1>Luca Gerencial</h1>
            <nav>
                <a href="index.html" class="active">In√≠cio</a>
                <a href="despesas.html">Lan√ßamentos</a>
                <a href="settings.html">Configura√ß√µes</a>
            </nav>
        </div>
        <div class="user-info">
            Ol√°, <span id="user-name">Utilizador</span>!
            <button id="logout-button">Sair</button>
        </div>
    </div>

    <div class="container">
        <h2>Painel Principal</h2>
        <p>Bem-vindo ao seu sistema de gest√£o. Selecione um m√≥dulo abaixo para come√ßar.</p>
        
        <div class="hub-grid">
            <a href="despesas.html" class="hub-card">
                <h3>M√≥dulo de Despesas</h3>
                <p>Visualize, adicione e gira os lan√ßamentos de despesas di√°rias.</p>
            </a>
            <a href="settings.html" class="hub-card">
                <h3>Configura√ß√µes</h3>
                <p>Gira os par√¢metros do sistema, como unidades, tipos, grupos e a logo da empresa.</p>
            </a>
            <!-- Futuros m√≥dulos podem ser adicionados aqui -->
        </div>
    </div>

    <footer>
        <p>Luca Materiais para Constru√ß√£o LTDA - Dep. TI<br>
        Todos os Direitos Reservados.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const token = localStorage.getItem('lucaUserToken');
            if (!token) {
                window.location.href = 'login.html';
                return;
            }
            try {
                const payload = JSON.parse(atob(token.split('.')[1]));
                document.getElementById('user-name').textContent = payload.nome || 'Utilizador';
            } catch (e) {
                console.error("Erro ao ler token:", e);
                localStorage.removeItem('lucaUserToken');
                window.location.href = 'login.html';
            }

            document.getElementById('logout-button').addEventListener('click', () => {
                localStorage.removeItem('lucaUserToken');
                window.location.href = 'login.html';
            });
        });
    </script>
</body>
</html>
